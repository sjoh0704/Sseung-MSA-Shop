{"ast":null,"code":"var _jsxFileName = \"/home/seung/react/shop/front-shop/src/components/PurchaseList.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { ListGroup, Container, Row, Col } from 'react-bootstrap';\nimport Title from './Title';\nimport { useSelector } from 'react-redux';\nimport placeholder from '../assets/images/placeholder2.jpg';\nimport good from '../assets/images/good.png';\nimport bad from '../assets/images/bad.png';\nimport EmptyCheck from './EmptyCheck';\nimport { CategoryDirection } from './CategoryBanner';\nimport { setMoney, setDate } from './Convenient';\nimport Modal from './Modal';\nimport Rating from './Rating';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction PurchaseList({\n  history\n}) {\n  _s();\n\n  const [modalOpen, setModalOpen] = useState(false);\n  const [modalContents, setModalContents] = useState('');\n\n  const closeModal = () => {\n    setModalOpen(false);\n  };\n\n  var products = [];\n  const [orders, setOrders] = useState([]);\n  const {\n    isLoggedIn,\n    userData\n  } = useSelector(state => ({\n    isLoggedIn: state.user.isLoggedIn,\n    userData: state.user.payload\n  }));\n  const [ratingCheckCnt, setRatingCheckCnt] = useState(0);\n\n  const fetchUserInfo = async (userId, orderId) => {\n    let res = await axios.get('/apis/v1/user/' + userId);\n    setModalOpen(true);\n    let data = res.data.payload.payload;\n    setModalContents( /*#__PURE__*/_jsxDEV(Container, {\n      children: [/*#__PURE__*/_jsxDEV(Rating, {\n        user: data\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        style: {\n          marginTop: 20\n        },\n        children: /*#__PURE__*/_jsxDEV(Col, {\n          children: [\"\\uC774\\uBA54\\uC77C: \", data.useremail]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 37,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        style: {\n          marginTop: 20\n        },\n        children: /*#__PURE__*/_jsxDEV(Col, {\n          children: [\"\\uACC4\\uC815 \\uC0DD\\uC131\\uC77C: \", setDate(data.created_at)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        style: {\n          marginTop: 20\n        },\n        children: [/*#__PURE__*/_jsxDEV(Col, {\n          lg: {\n            span: 4,\n            offset: 2\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            style: {\n              width: 30,\n              height: 30\n            },\n            src: good\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 48,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            style: {\n              background: 'white',\n              color: 'green'\n            },\n            onClick: () => evaluateSellerGood(userId, orderId),\n            children: \"\\uC88B\\uC544\\uC694!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 49,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          lg: {\n            span: 4\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            style: {\n              width: 30,\n              height: 30\n            },\n            src: bad\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 55,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            style: {\n              background: 'white',\n              color: 'red'\n            },\n            onClick: () => evaluateSellerBad(userId, orderId),\n            children: \"\\uC2EB\\uC5B4\\uC694!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 56,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 26\n    }, this));\n  };\n\n  const evaluateSellerGood = async (userId, orderId) => {\n    await axios.get(`/apis/v1/ratings/${userId}/up`);\n    await axios.post(`/apis/v1/order/${orderId}`, {\n      rating_check: false\n    });\n    setModalOpen(false);\n  };\n\n  const evaluateSellerBad = async (userId, orderId) => {\n    await axios.get(`/apis/v1/ratings/${userId}/down`);\n    await axios.post(`/apis/v1/order/${orderId}`, {\n      rating_check: true\n    });\n    setModalOpen(false);\n  };\n\n  const fetchOrders = async () => {\n    let res = await axios.get('/apis/v1/order/' + userData.user_id);\n    let tmp_order = res.data.payload.payload.filter(order => order.sales_stage == 'SO');\n    let orderlist = tmp_order.map((order, index) => {\n      if (order.rating_check) rating_check_cnt += 1;\n      return /*#__PURE__*/_jsxDEV(ListGroup.Item, {\n        children: /*#__PURE__*/_jsxDEV(Row, {\n          style: {\n            margin: 30\n          },\n          children: [/*#__PURE__*/_jsxDEV(Col, {\n            sm: \"6\",\n            lg: \"5\",\n            xs: \"12\",\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              style: {\n                height: 'auto',\n                maxWidth: '100%',\n                height: 'auto'\n              },\n              src: order.base64_image_url ? order.base64_image_url : placeholder\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 89,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Col, {\n            sm: \"6\",\n            lg: {\n              span: 6,\n              offset: 1\n            },\n            xs: \"12\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                marginLeft: 20,\n                paddingTop: 10\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  fontSize: '1.5rem',\n                  marginLeft: 20,\n                  fontWeight: 'bold'\n                },\n                children: order.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 94,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  fontSize: '1.3rem',\n                  marginLeft: 20\n                },\n                children: [\"\\uAD6C\\uB9E4\\uB7C9: \", order.demand_quantity]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 97,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  fontSize: '1.3rem',\n                  marginLeft: 20\n                },\n                children: [\"\\uC9C0\\uBD88 \\uAE08\\uC561: \", setMoney(order.price), \" \\u20A9\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 100,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  fontSize: '1.3rem',\n                  marginLeft: 20\n                },\n                children: [\"\\uC8FC\\uBB38 \\uB0A0\\uC9DC: \", setDate(order.created_at)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 103,\n                columnNumber: 25\n              }, this), !order.rating_check ? /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  children: \"\\uD310\\uB9E4\\uC790\\uC758 \\uB9E4\\uB108\\uB97C \\uD3C9\\uAC00\\uD574\\uBCFC\\uAE4C\\uC694?\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 107,\n                  columnNumber: 29\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"emptyButton\",\n                  onClick: () => fetchUserInfo(order.buyer_id, order.order_id),\n                  style: {\n                    height: '4rem',\n                    fontSize: '1.3rem'\n                  },\n                  children: \"\\uB9E4\\uB108 \\uD3C9\\uAC00\\uD558\\uAE30\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 108,\n                  columnNumber: 29\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 106,\n                columnNumber: 48\n              }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: \"\\uD310\\uB9E4\\uC790\\uC758 \\uB9E4\\uB108 \\uD3C9\\uAC00\\uB97C \\uC644\\uB8CC\\uD588\\uC2B5\\uB2C8\\uB2E4.\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 114,\n                  columnNumber: 27\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 113,\n                columnNumber: 27\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 92,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 25\n        }, this)\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 25\n      }, this);\n    });\n    setOrders(orderlist);\n  };\n\n  useEffect(() => {\n    fetchOrders();\n  }, [userData.user_id, rating_check_cnt]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Modal, {\n      open: modalOpen,\n      close: closeModal,\n      children: modalContents\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      children: [/*#__PURE__*/_jsxDEV(CategoryDirection, {\n        tag1: '구매 목록'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(EmptyCheck, {\n        text: \"구매한 상품이 없습니다\",\n        items: orders\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 142,\n    columnNumber: 13\n  }, this);\n}\n\n_s(PurchaseList, \"yKMqgrsHNmYXDpPSqbDUwt6HiIY=\", false, function () {\n  return [useSelector];\n});\n\n_c = PurchaseList;\nexport default PurchaseList;\n\nvar _c;\n\n$RefreshReg$(_c, \"PurchaseList\");","map":{"version":3,"sources":["/home/seung/react/shop/front-shop/src/components/PurchaseList.js"],"names":["React","useState","useEffect","axios","ListGroup","Container","Row","Col","Title","useSelector","placeholder","good","bad","EmptyCheck","CategoryDirection","setMoney","setDate","Modal","Rating","PurchaseList","history","modalOpen","setModalOpen","modalContents","setModalContents","closeModal","products","orders","setOrders","isLoggedIn","userData","state","user","payload","ratingCheckCnt","setRatingCheckCnt","fetchUserInfo","userId","orderId","res","get","data","marginTop","useremail","created_at","span","offset","width","height","background","color","evaluateSellerGood","evaluateSellerBad","post","rating_check","fetchOrders","user_id","tmp_order","filter","order","sales_stage","orderlist","map","index","rating_check_cnt","margin","maxWidth","base64_image_url","marginLeft","paddingTop","fontSize","fontWeight","name","demand_quantity","price","buyer_id","order_id"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react'\nimport axios from 'axios'\nimport {ListGroup, Container, Row, Col} from 'react-bootstrap'\nimport Title from './Title'\nimport {useSelector} from 'react-redux'\nimport placeholder from '../assets/images/placeholder2.jpg'\nimport good from '../assets/images/good.png'\nimport bad from '../assets/images/bad.png'\n\nimport EmptyCheck from './EmptyCheck'\nimport { CategoryDirection } from './CategoryBanner'\nimport {setMoney, setDate} from './Convenient'\nimport Modal from './Modal'\nimport Rating from './Rating'\n\nfunction PurchaseList({history}){\n    const [ modalOpen, setModalOpen ] = useState(false);\n    const [ modalContents, setModalContents ] = useState('');\t\n    const closeModal = () => {\n        setModalOpen(false);\n    }\n    var products = []\n    const [orders, setOrders] = useState([]) \n    const {isLoggedIn, userData} = useSelector(state =>({\n        isLoggedIn: state.user.isLoggedIn,\n        userData: state.user.payload\n    }))\n    const [ratingCheckCnt, setRatingCheckCnt] = useState(0);\n\n    const fetchUserInfo = async (userId, orderId) => {\n        let res = await axios.get('/apis/v1/user/' + userId);\n        setModalOpen(true);\n        let data = res.data.payload.payload\n        setModalContents(<Container>\n            <Rating user={data}></Rating>\n            <Row style={{marginTop: 20}}>\n                <Col>\n                이메일: {data.useremail}\n                </Col>\n            </Row>\n            <Row style={{marginTop: 20}}>\n                <Col>\n                계정 생성일: {setDate(data.created_at)}\n                </Col>\n            </Row>\n            <Row style={{marginTop: 20}}>\n                <Col lg={{span:4, offset:2}}>\n                <img style={{width:30, height:30}}src={good}></img>\n                <button\n                style={{background:'white', color:'green'}} \n                onClick={()=>evaluateSellerGood(userId, orderId)}>좋아요!</button>\n                </Col>\n                <Col lg={{span:4}}>\n               \n                <img style={{width:30, height:30}}src={bad}></img>\n                <button \n                style={{background:'white', color:'red'}} \n                onClick={()=>evaluateSellerBad(userId, orderId)}>싫어요!</button>\n                </Col>\n            </Row>\n        </Container>);   \n    }\n\n    const evaluateSellerGood = async(userId, orderId)=>{\n        await axios.get(`/apis/v1/ratings/${userId}/up`);\n        await axios.post(`/apis/v1/order/${orderId}`, {rating_check: false});\n        setModalOpen(false);\n        \n    }\n    const evaluateSellerBad = async(userId, orderId)=>{\n        await axios.get(`/apis/v1/ratings/${userId}/down`);\n        await axios.post(`/apis/v1/order/${orderId}`, {rating_check: true});\n        setModalOpen(false);\n    }\n\n\n\n    const fetchOrders= async()=>{\n            let res = await axios.get('/apis/v1/order/' + userData.user_id)\n            let tmp_order = res.data.payload.payload.filter(order=> order.sales_stage == 'SO')\n            let orderlist = tmp_order.map((order, index) => {\n                if(order.rating_check)\n                rating_check_cnt += 1\n                return (\n                        \n                        <ListGroup.Item key={index}>\n                        <Row style={{margin:30}}>\n                        <Col sm='6' lg='5' xs='12'>\n                        <img style={{height: 'auto', maxWidth:'100%', height:'auto'}} src={order.base64_image_url?order.base64_image_url:placeholder}></img>\n                        </Col>\n                        <Col sm='6' lg={{span:6, offset:1}} xs='12'>\n                        <div style={{marginLeft:20, paddingTop:10}}>\n                        \n                        <p style={{fontSize:'1.5rem',marginLeft:20, fontWeight:'bold'}}>\n                        {order.name}\n                        </p>\n                        <p style={{fontSize:'1.3rem',marginLeft:20}}>\n                        구매량: {order.demand_quantity}\n                        </p>\n                        <p style={{fontSize:'1.3rem',marginLeft:20}}>\n                        지불 금액: {setMoney(order.price)} ₩\n                        </p>\n                        <p style={{fontSize:'1.3rem',marginLeft:20}}>\n                        주문 날짜: {setDate(order.created_at)}\n                        </p>\n                        {!order.rating_check?  <div>\n                            <p>판매자의 매너를 평가해볼까요?</p>\n                            <button className='emptyButton'\n                                onClick={()=>fetchUserInfo(order.buyer_id, order.order_id)}\n                                style ={{height:'4rem', fontSize:'1.3rem'}}\n                                 >매너 평가하기</button>\n                        </div>:\n                          <div>\n                          <p>판매자의 매너 평가를 완료했습니다.</p>\n                          \n                      </div>\n                        }\n                      \n                        \n                        </div>\n     \n                        </Col>\n                        </Row>\n                        </ListGroup.Item>\n                );\n            })\n            setOrders(orderlist);        \n    }\n\n\n    useEffect(()=>{\n        fetchOrders()\n    },[userData.user_id, rating_check_cnt])\n\n\n\n \n\n    \n    \n\n    return (<div>\n        <Modal open={ modalOpen } close={ closeModal } >\n\t\t    {modalContents}\n        </Modal>\n       \n\n   \n        <Container>\n        <CategoryDirection tag1={'구매 목록'}></CategoryDirection>\n        <EmptyCheck text={\"구매한 상품이 없습니다\"} items={orders}></EmptyCheck>\n        </Container>\n        \n\n    </div>)\n}\n\nexport default PurchaseList;"]},"metadata":{},"sourceType":"module"}