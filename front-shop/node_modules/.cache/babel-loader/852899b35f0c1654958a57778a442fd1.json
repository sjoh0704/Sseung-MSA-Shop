{"ast":null,"code":"var _jsxFileName = \"/home/seung/react/shop/front-shop/src/components/PurchaseList.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { ListGroup, Container, Row, Col } from 'react-bootstrap';\nimport Title from './Title';\nimport { useSelector } from 'react-redux';\nimport placeholder from '../assets/images/placeholder2.jpg';\nimport good from '../assets/images/good.png';\nimport bad from '../assets/images/bad.png';\nimport EmptyCheck from './EmptyCheck';\nimport { CategoryDirection } from './CategoryBanner';\nimport { setMoney, setDate } from './Convenient';\nimport Modal from './Modal';\nimport Rating from './Rating';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction PurchaseList({\n  history\n}) {\n  _s();\n\n  const [modalOpen, setModalOpen] = useState(false);\n  const [modalContents, setModalContents] = useState('');\n\n  const closeModal = () => {\n    setModalOpen(false);\n  };\n\n  var products = [];\n  const [orders, setOrders] = useState([]);\n  const {\n    isLoggedIn,\n    userData\n  } = useSelector(state => ({\n    isLoggedIn: state.user.isLoggedIn,\n    userData: state.user.payload\n  }));\n  const [flag, setFlag] = useState(true);\n\n  const fetchUserInfo = async (userId, orderId) => {\n    let res = await axios.get('/apis/v1/user/' + userId);\n    setModalOpen(true);\n    let data = res.data.payload.payload;\n    setModalContents( /*#__PURE__*/_jsxDEV(Container, {\n      children: [/*#__PURE__*/_jsxDEV(Rating, {\n        user: data\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        style: {\n          marginTop: 20\n        },\n        children: /*#__PURE__*/_jsxDEV(Col, {\n          children: [\"\\uC774\\uBA54\\uC77C: \", data.useremail]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 37,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        style: {\n          marginTop: 20\n        },\n        children: /*#__PURE__*/_jsxDEV(Col, {\n          children: [\"\\uACC4\\uC815 \\uC0DD\\uC131\\uC77C: \", setDate(data.created_at)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        style: {\n          marginTop: 20\n        },\n        children: [/*#__PURE__*/_jsxDEV(Col, {\n          lg: {\n            span: 4,\n            offset: 2\n          },\n          sm: {\n            span: 4,\n            offset: 2\n          },\n          xs: {\n            span: 4,\n            offset: 2\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            style: {\n              width: 30,\n              height: 30\n            },\n            src: good,\n            onClick: () => evaluateSellerGood(userId, orderId)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 48,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            style: {\n              background: 'white',\n              color: 'green'\n            },\n            onClick: () => evaluateSellerGood(userId, orderId),\n            children: \"\\uC88B\\uC544\\uC694!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 51,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          lg: {\n            span: 4\n          },\n          sm: {\n            span: 4\n          },\n          xs: {\n            span: 4\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            style: {\n              width: 30,\n              height: 30\n            },\n            src: bad\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            style: {\n              background: 'white',\n              color: 'red'\n            },\n            onClick: () => evaluateSellerBad(userId, orderId),\n            children: \"\\uC2EB\\uC5B4\\uC694!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 26\n    }, this));\n  };\n\n  const evaluateSellerGood = async (userId, orderId) => {\n    await axios.get(`/apis/v1/ratings/${userId}/up`);\n    await axios.post(`/apis/v1/order/${orderId}`, {\n      rating_check: true\n    });\n    setModalOpen(false);\n    setFlag(!flag);\n  };\n\n  const evaluateSellerBad = async (userId, orderId) => {\n    await axios.get(`/apis/v1/ratings/${userId}/down`);\n    await axios.post(`/apis/v1/order/${orderId}`, {\n      rating_check: true\n    });\n    setModalOpen(false);\n    setFlag(!flag);\n  };\n\n  const fetchOrders = async () => {\n    let res = await axios.get('/apis/v1/order/' + userData.user_id);\n    let tmp_order = res.data.payload.payload.filter(order => order.sales_stage == 'SO');\n    let orderlist = tmp_order.map((order, index) => {\n      return /*#__PURE__*/_jsxDEV(ListGroup.Item, {\n        children: /*#__PURE__*/_jsxDEV(Row, {\n          style: {\n            margin: 30\n          },\n          children: [/*#__PURE__*/_jsxDEV(Col, {\n            sm: \"6\",\n            lg: \"5\",\n            xs: \"12\",\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              style: {\n                height: 'auto',\n                maxWidth: '100%',\n                height: 'auto'\n              },\n              src: order.base64_image_url ? order.base64_image_url : placeholder\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 96,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Col, {\n            sm: \"6\",\n            lg: {\n              span: 6,\n              offset: 1\n            },\n            xs: \"12\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                paddingTop: 10\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  fontSize: '1.5rem',\n                  fontWeight: 'bold'\n                },\n                children: order.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 101,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  fontSize: '1.3rem'\n                },\n                children: [\"\\uAD6C\\uB9E4\\uB7C9: \", order.demand_quantity]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 104,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  fontSize: '1.3rem'\n                },\n                children: [\"\\uC9C0\\uBD88 \\uAE08\\uC561: \", setMoney(order.price), \" \\u20A9\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 107,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  fontSize: '1.3rem'\n                },\n                children: [\"\\uC8FC\\uBB38 \\uB0A0\\uC9DC: \", setDate(order.created_at)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 110,\n                columnNumber: 25\n              }, this), order.rating_check ? /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  style: {\n                    fontSize: '1.3rem',\n                    color: 'blue'\n                  },\n                  children: \"\\uD310\\uB9E4\\uC790\\uC758 \\uB9E4\\uB108\\uB97C \\uD3C9\\uAC00\\uD574\\uBCFC\\uAE4C\\uC694?\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 114,\n                  columnNumber: 29\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"emptyButton\",\n                  onClick: () => fetchUserInfo(order.buyer_id, order.order_id),\n                  style: {\n                    height: '4rem',\n                    fontSize: '1.3rem'\n                  },\n                  children: \"\\uB9E4\\uB108 \\uD3C9\\uAC00\\uD558\\uAE30\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 115,\n                  columnNumber: 29\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 113,\n                columnNumber: 47\n              }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(\"p\", {\n                  style: {\n                    fontSize: '1.3rem',\n                    color: 'green'\n                  },\n                  children: \"\\uB9E4\\uB108 \\uD3C9\\uAC00\\uB97C \\uC644\\uB8CC\\uD588\\uC2B5\\uB2C8\\uB2E4.\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 121,\n                  columnNumber: 27\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 120,\n                columnNumber: 27\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 25\n        }, this)\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 25\n      }, this);\n    });\n    setOrders(orderlist);\n  };\n\n  useEffect(() => {\n    fetchOrders();\n  }, [userData.user_id, flag]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Modal, {\n      open: modalOpen,\n      close: closeModal,\n      children: modalContents\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      children: [/*#__PURE__*/_jsxDEV(CategoryDirection, {\n        tag1: '구매 목록'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(EmptyCheck, {\n        text: \"구매한 상품이 없습니다\",\n        items: orders\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 151,\n    columnNumber: 13\n  }, this);\n}\n\n_s(PurchaseList, \"kE/JsQ2hAD61RVOcBmDFKP8cUvU=\", false, function () {\n  return [useSelector];\n});\n\n_c = PurchaseList;\nexport default PurchaseList;\n\nvar _c;\n\n$RefreshReg$(_c, \"PurchaseList\");","map":{"version":3,"sources":["/home/seung/react/shop/front-shop/src/components/PurchaseList.js"],"names":["React","useState","useEffect","axios","ListGroup","Container","Row","Col","Title","useSelector","placeholder","good","bad","EmptyCheck","CategoryDirection","setMoney","setDate","Modal","Rating","PurchaseList","history","modalOpen","setModalOpen","modalContents","setModalContents","closeModal","products","orders","setOrders","isLoggedIn","userData","state","user","payload","flag","setFlag","fetchUserInfo","userId","orderId","res","get","data","marginTop","useremail","created_at","span","offset","width","height","evaluateSellerGood","background","color","evaluateSellerBad","post","rating_check","fetchOrders","user_id","tmp_order","filter","order","sales_stage","orderlist","map","index","margin","maxWidth","base64_image_url","paddingTop","fontSize","fontWeight","name","demand_quantity","price","buyer_id","order_id"],"mappings":";;;AAAA,OAAOA,KAAP,IAAeC,QAAf,EAAyBC,SAAzB,QAAyC,OAAzC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAAQC,SAAR,EAAmBC,SAAnB,EAA8BC,GAA9B,EAAmCC,GAAnC,QAA6C,iBAA7C;AACA,OAAOC,KAAP,MAAkB,SAAlB;AACA,SAAQC,WAAR,QAA0B,aAA1B;AACA,OAAOC,WAAP,MAAwB,mCAAxB;AACA,OAAOC,IAAP,MAAiB,2BAAjB;AACA,OAAOC,GAAP,MAAgB,0BAAhB;AAEA,OAAOC,UAAP,MAAuB,cAAvB;AACA,SAASC,iBAAT,QAAkC,kBAAlC;AACA,SAAQC,QAAR,EAAkBC,OAAlB,QAAgC,cAAhC;AACA,OAAOC,KAAP,MAAkB,SAAlB;AACA,OAAOC,MAAP,MAAmB,UAAnB;;;AAEA,SAASC,YAAT,CAAsB;AAACC,EAAAA;AAAD,CAAtB,EAAgC;AAAA;;AAC5B,QAAM,CAAEC,SAAF,EAAaC,YAAb,IAA8BrB,QAAQ,CAAC,KAAD,CAA5C;AACA,QAAM,CAAEsB,aAAF,EAAiBC,gBAAjB,IAAsCvB,QAAQ,CAAC,EAAD,CAApD;;AACA,QAAMwB,UAAU,GAAG,MAAM;AACrBH,IAAAA,YAAY,CAAC,KAAD,CAAZ;AACH,GAFD;;AAGA,MAAII,QAAQ,GAAG,EAAf;AACA,QAAM,CAACC,MAAD,EAASC,SAAT,IAAsB3B,QAAQ,CAAC,EAAD,CAApC;AACA,QAAM;AAAC4B,IAAAA,UAAD;AAAaC,IAAAA;AAAb,MAAyBrB,WAAW,CAACsB,KAAK,KAAI;AAChDF,IAAAA,UAAU,EAAEE,KAAK,CAACC,IAAN,CAAWH,UADyB;AAEhDC,IAAAA,QAAQ,EAAEC,KAAK,CAACC,IAAN,CAAWC;AAF2B,GAAJ,CAAN,CAA1C;AAIA,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBlC,QAAQ,CAAC,IAAD,CAAhC;;AAEA,QAAMmC,aAAa,GAAG,OAAOC,MAAP,EAAeC,OAAf,KAA2B;AAC7C,QAAIC,GAAG,GAAG,MAAMpC,KAAK,CAACqC,GAAN,CAAU,mBAAmBH,MAA7B,CAAhB;AACAf,IAAAA,YAAY,CAAC,IAAD,CAAZ;AACA,QAAImB,IAAI,GAAGF,GAAG,CAACE,IAAJ,CAASR,OAAT,CAAiBA,OAA5B;AACAT,IAAAA,gBAAgB,eAAC,QAAC,SAAD;AAAA,8BACb,QAAC,MAAD;AAAQ,QAAA,IAAI,EAAEiB;AAAd;AAAA;AAAA;AAAA;AAAA,cADa,eAEb,QAAC,GAAD;AAAK,QAAA,KAAK,EAAE;AAACC,UAAAA,SAAS,EAAE;AAAZ,SAAZ;AAAA,+BACI,QAAC,GAAD;AAAA,6CACMD,IAAI,CAACE,SADX;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,cAFa,eAOb,QAAC,GAAD;AAAK,QAAA,KAAK,EAAE;AAACD,UAAAA,SAAS,EAAE;AAAZ,SAAZ;AAAA,+BACI,QAAC,GAAD;AAAA,0DACS1B,OAAO,CAACyB,IAAI,CAACG,UAAN,CADhB;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,cAPa,eAYb,QAAC,GAAD;AAAK,QAAA,KAAK,EAAE;AAACF,UAAAA,SAAS,EAAE;AAAZ,SAAZ;AAAA,gCACI,QAAC,GAAD;AAAK,UAAA,EAAE,EAAE;AAACG,YAAAA,IAAI,EAAC,CAAN;AAASC,YAAAA,MAAM,EAAC;AAAhB,WAAT;AAA6B,UAAA,EAAE,EAAE;AAACD,YAAAA,IAAI,EAAC,CAAN;AAASC,YAAAA,MAAM,EAAC;AAAhB,WAAjC;AAAqD,UAAA,EAAE,EAAE;AAACD,YAAAA,IAAI,EAAC,CAAN;AAASC,YAAAA,MAAM,EAAE;AAAjB,WAAzD;AAAA,kCACA;AAAK,YAAA,KAAK,EAAE;AAACC,cAAAA,KAAK,EAAC,EAAP;AAAWC,cAAAA,MAAM,EAAC;AAAlB,aAAZ;AACA,YAAA,GAAG,EAAErC,IADL;AAEA,YAAA,OAAO,EAAE,MAAIsC,kBAAkB,CAACZ,MAAD,EAASC,OAAT;AAF/B;AAAA;AAAA;AAAA;AAAA,kBADA,eAIA;AACA,YAAA,KAAK,EAAE;AAACY,cAAAA,UAAU,EAAC,OAAZ;AAAqBC,cAAAA,KAAK,EAAC;AAA3B,aADP;AAEA,YAAA,OAAO,EAAE,MAAIF,kBAAkB,CAACZ,MAAD,EAASC,OAAT,CAF/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAJA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,eASI,QAAC,GAAD;AAAK,UAAA,EAAE,EAAE;AAACO,YAAAA,IAAI,EAAC;AAAN,WAAT;AAAmB,UAAA,EAAE,EAAE;AAACA,YAAAA,IAAI,EAAC;AAAN,WAAvB;AAAiC,UAAA,EAAE,EAAE;AAACA,YAAAA,IAAI,EAAC;AAAN,WAArC;AAAA,kCAEA;AAAK,YAAA,KAAK,EAAE;AAACE,cAAAA,KAAK,EAAC,EAAP;AAAWC,cAAAA,MAAM,EAAC;AAAlB,aAAZ;AACA,YAAA,GAAG,EAAEpC;AADL;AAAA;AAAA;AAAA;AAAA,kBAFA,eAIA;AACA,YAAA,KAAK,EAAE;AAACsC,cAAAA,UAAU,EAAC,OAAZ;AAAqBC,cAAAA,KAAK,EAAC;AAA3B,aADP;AAEA,YAAA,OAAO,EAAE,MAAIC,iBAAiB,CAACf,MAAD,EAASC,OAAT,CAF9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAJA;AAAA;AAAA;AAAA;AAAA;AAAA,gBATJ;AAAA;AAAA;AAAA;AAAA;AAAA,cAZa;AAAA;AAAA;AAAA;AAAA;AAAA,YAAD,CAAhB;AA+BH,GAnCD;;AAqCA,QAAMW,kBAAkB,GAAG,OAAMZ,MAAN,EAAcC,OAAd,KAAwB;AAC/C,UAAMnC,KAAK,CAACqC,GAAN,CAAW,oBAAmBH,MAAO,KAArC,CAAN;AACA,UAAMlC,KAAK,CAACkD,IAAN,CAAY,kBAAiBf,OAAQ,EAArC,EAAwC;AAACgB,MAAAA,YAAY,EAAE;AAAf,KAAxC,CAAN;AAEAhC,IAAAA,YAAY,CAAC,KAAD,CAAZ;AACAa,IAAAA,OAAO,CAAC,CAACD,IAAF,CAAP;AACH,GAND;;AAOA,QAAMkB,iBAAiB,GAAG,OAAMf,MAAN,EAAcC,OAAd,KAAwB;AAC9C,UAAMnC,KAAK,CAACqC,GAAN,CAAW,oBAAmBH,MAAO,OAArC,CAAN;AACA,UAAMlC,KAAK,CAACkD,IAAN,CAAY,kBAAiBf,OAAQ,EAArC,EAAwC;AAACgB,MAAAA,YAAY,EAAE;AAAf,KAAxC,CAAN;AACAhC,IAAAA,YAAY,CAAC,KAAD,CAAZ;AACAa,IAAAA,OAAO,CAAC,CAACD,IAAF,CAAP;AAEH,GAND;;AAUA,QAAMqB,WAAW,GAAE,YAAS;AACpB,QAAIhB,GAAG,GAAG,MAAMpC,KAAK,CAACqC,GAAN,CAAU,oBAAoBV,QAAQ,CAAC0B,OAAvC,CAAhB;AACA,QAAIC,SAAS,GAAGlB,GAAG,CAACE,IAAJ,CAASR,OAAT,CAAiBA,OAAjB,CAAyByB,MAAzB,CAAgCC,KAAK,IAAGA,KAAK,CAACC,WAAN,IAAqB,IAA7D,CAAhB;AAEA,QAAIC,SAAS,GAAGJ,SAAS,CAACK,GAAV,CAAc,CAACH,KAAD,EAAQI,KAAR,KAAkB;AAG5C,0BAEQ,QAAC,SAAD,CAAW,IAAX;AAAA,+BACA,QAAC,GAAD;AAAK,UAAA,KAAK,EAAE;AAACC,YAAAA,MAAM,EAAC;AAAR,WAAZ;AAAA,kCACA,QAAC,GAAD;AAAK,YAAA,EAAE,EAAC,GAAR;AAAY,YAAA,EAAE,EAAC,GAAf;AAAmB,YAAA,EAAE,EAAC,IAAtB;AAAA,mCACA;AAAK,cAAA,KAAK,EAAE;AAAChB,gBAAAA,MAAM,EAAE,MAAT;AAAiBiB,gBAAAA,QAAQ,EAAC,MAA1B;AAAkCjB,gBAAAA,MAAM,EAAC;AAAzC,eAAZ;AAA8D,cAAA,GAAG,EAAEW,KAAK,CAACO,gBAAN,GAAuBP,KAAK,CAACO,gBAA7B,GAA8CxD;AAAjH;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA,kBADA,eAIA,QAAC,GAAD;AAAK,YAAA,EAAE,EAAC,GAAR;AAAY,YAAA,EAAE,EAAE;AAACmC,cAAAA,IAAI,EAAC,CAAN;AAASC,cAAAA,MAAM,EAAC;AAAhB,aAAhB;AAAoC,YAAA,EAAE,EAAC,IAAvC;AAAA,mCACA;AAAK,cAAA,KAAK,EAAE;AAACqB,gBAAAA,UAAU,EAAC;AAAZ,eAAZ;AAAA,sCAEA;AAAG,gBAAA,KAAK,EAAE;AAACC,kBAAAA,QAAQ,EAAC,QAAV;AAAoBC,kBAAAA,UAAU,EAAC;AAA/B,iBAAV;AAAA,0BACCV,KAAK,CAACW;AADP;AAAA;AAAA;AAAA;AAAA,sBAFA,eAKA;AAAG,gBAAA,KAAK,EAAE;AAACF,kBAAAA,QAAQ,EAAC;AAAV,iBAAV;AAAA,mDACMT,KAAK,CAACY,eADZ;AAAA;AAAA;AAAA;AAAA;AAAA,sBALA,eAQA;AAAG,gBAAA,KAAK,EAAE;AAACH,kBAAAA,QAAQ,EAAC;AAAV,iBAAV;AAAA,0DACQrD,QAAQ,CAAC4C,KAAK,CAACa,KAAP,CADhB;AAAA;AAAA;AAAA;AAAA;AAAA,sBARA,eAWA;AAAG,gBAAA,KAAK,EAAE;AAACJ,kBAAAA,QAAQ,EAAC;AAAV,iBAAV;AAAA,0DACQpD,OAAO,CAAC2C,KAAK,CAACf,UAAP,CADf;AAAA;AAAA;AAAA;AAAA;AAAA,sBAXA,EAcCe,KAAK,CAACL,YAAN,gBAAqB;AAAA,wCAClB;AAAG,kBAAA,KAAK,EAAE;AAACc,oBAAAA,QAAQ,EAAC,QAAV;AAAoBjB,oBAAAA,KAAK,EAAC;AAA1B,mBAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADkB,eAElB;AAAQ,kBAAA,SAAS,EAAC,aAAlB;AACI,kBAAA,OAAO,EAAE,MAAIf,aAAa,CAACuB,KAAK,CAACc,QAAP,EAAiBd,KAAK,CAACe,QAAvB,CAD9B;AAEI,kBAAA,KAAK,EAAG;AAAC1B,oBAAAA,MAAM,EAAC,MAAR;AAAgBoB,oBAAAA,QAAQ,EAAC;AAAzB,mBAFZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAFkB;AAAA;AAAA;AAAA;AAAA;AAAA,sBAArB,gBAOC;AAAA,uCACA;AAAG,kBAAA,KAAK,EAAE;AAACA,oBAAAA,QAAQ,EAAC,QAAV;AAAoBjB,oBAAAA,KAAK,EAAC;AAA1B,mBAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA,sBArBF;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA,kBAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AADA,SAAqBY,KAArB;AAAA;AAAA;AAAA;AAAA,cAFR;AA2CH,KA9Ce,CAAhB;AAgDAnC,IAAAA,SAAS,CAACiC,SAAD,CAAT;AACP,GArDD;;AAwDA3D,EAAAA,SAAS,CAAC,MAAI;AACVqD,IAAAA,WAAW;AACd,GAFQ,EAEP,CAACzB,QAAQ,CAAC0B,OAAV,EAAmBtB,IAAnB,CAFO,CAAT;AAWA,sBAAQ;AAAA,4BACJ,QAAC,KAAD;AAAO,MAAA,IAAI,EAAGb,SAAd;AAA0B,MAAA,KAAK,EAAGI,UAAlC;AAAA,gBACDF;AADC;AAAA;AAAA;AAAA;AAAA,YADI,eAOJ,QAAC,SAAD;AAAA,8BACA,QAAC,iBAAD;AAAmB,QAAA,IAAI,EAAE;AAAzB;AAAA;AAAA;AAAA;AAAA,cADA,eAEA,QAAC,UAAD;AAAY,QAAA,IAAI,EAAE,cAAlB;AAAkC,QAAA,KAAK,EAAEI;AAAzC;AAAA;AAAA;AAAA;AAAA,cAFA;AAAA;AAAA;AAAA;AAAA;AAAA,YAPI;AAAA;AAAA;AAAA;AAAA;AAAA,UAAR;AAcH;;GArJQR,Y;UAQ0BV,W;;;KAR1BU,Y;AAuJT,eAAeA,YAAf","sourcesContent":["import React, {useState, useEffect} from 'react'\nimport axios from 'axios'\nimport {ListGroup, Container, Row, Col} from 'react-bootstrap'\nimport Title from './Title'\nimport {useSelector} from 'react-redux'\nimport placeholder from '../assets/images/placeholder2.jpg'\nimport good from '../assets/images/good.png'\nimport bad from '../assets/images/bad.png'\n\nimport EmptyCheck from './EmptyCheck'\nimport { CategoryDirection } from './CategoryBanner'\nimport {setMoney, setDate} from './Convenient'\nimport Modal from './Modal'\nimport Rating from './Rating'\n\nfunction PurchaseList({history}){\n    const [ modalOpen, setModalOpen ] = useState(false);\n    const [ modalContents, setModalContents ] = useState('');\t\n    const closeModal = () => {\n        setModalOpen(false);\n    }\n    var products = []\n    const [orders, setOrders] = useState([]) \n    const {isLoggedIn, userData} = useSelector(state =>({\n        isLoggedIn: state.user.isLoggedIn,\n        userData: state.user.payload\n    }))\n    const [flag, setFlag] = useState(true);\n\n    const fetchUserInfo = async (userId, orderId) => {\n        let res = await axios.get('/apis/v1/user/' + userId);\n        setModalOpen(true);\n        let data = res.data.payload.payload\n        setModalContents(<Container>\n            <Rating user={data}></Rating>\n            <Row style={{marginTop: 20}}>\n                <Col>\n                이메일: {data.useremail}\n                </Col>\n            </Row>\n            <Row style={{marginTop: 20}}>\n                <Col>\n                계정 생성일: {setDate(data.created_at)}\n                </Col>\n            </Row>\n            <Row style={{marginTop: 20}}>\n                <Col lg={{span:4, offset:2}} sm={{span:4, offset:2}} xs={{span:4, offset: 2}}>\n                <img style={{width:30, height:30}}\n                src={good}\n                onClick={()=>evaluateSellerGood(userId, orderId)}></img>\n                <button\n                style={{background:'white', color:'green'}} \n                onClick={()=>evaluateSellerGood(userId, orderId)}>좋아요!</button>\n                </Col>\n                <Col lg={{span:4}} sm={{span:4}} xs={{span:4}}>\n               \n                <img style={{width:30, height:30}}\n                src={bad}></img>\n                <button \n                style={{background:'white', color:'red'}} \n                onClick={()=>evaluateSellerBad(userId, orderId)}>싫어요!</button>\n                </Col>\n            </Row>\n        </Container>);   \n    }\n\n    const evaluateSellerGood = async(userId, orderId)=>{\n        await axios.get(`/apis/v1/ratings/${userId}/up`);\n        await axios.post(`/apis/v1/order/${orderId}`, {rating_check: true});\n      \n        setModalOpen(false);\n        setFlag(!flag);\n    }\n    const evaluateSellerBad = async(userId, orderId)=>{\n        await axios.get(`/apis/v1/ratings/${userId}/down`);\n        await axios.post(`/apis/v1/order/${orderId}`, {rating_check: true});\n        setModalOpen(false);\n        setFlag(!flag);\n\n    }\n\n\n\n    const fetchOrders= async()=>{\n            let res = await axios.get('/apis/v1/order/' + userData.user_id)\n            let tmp_order = res.data.payload.payload.filter(order=> order.sales_stage == 'SO')\n           \n            let orderlist = tmp_order.map((order, index) => {\n  \n                \n                return (\n                        \n                        <ListGroup.Item key={index}>\n                        <Row style={{margin:30}}>\n                        <Col sm='6' lg='5' xs='12'>\n                        <img style={{height: 'auto', maxWidth:'100%', height:'auto'}} src={order.base64_image_url?order.base64_image_url:placeholder}></img>\n                        </Col>\n                        <Col sm='6' lg={{span:6, offset:1}} xs='12'>\n                        <div style={{paddingTop:10}}>\n                        \n                        <p style={{fontSize:'1.5rem', fontWeight:'bold'}}>\n                        {order.name}\n                        </p>\n                        <p style={{fontSize:'1.3rem'}}>\n                        구매량: {order.demand_quantity}\n                        </p>\n                        <p style={{fontSize:'1.3rem'}}>\n                        지불 금액: {setMoney(order.price)} ₩\n                        </p>\n                        <p style={{fontSize:'1.3rem'}}>\n                        주문 날짜: {setDate(order.created_at)}\n                        </p >\n                        {order.rating_check?  <div>\n                            <p style={{fontSize:'1.3rem', color:'blue'}}>판매자의 매너를 평가해볼까요?</p>\n                            <button className='emptyButton'\n                                onClick={()=>fetchUserInfo(order.buyer_id, order.order_id)}\n                                style ={{height:'4rem', fontSize:'1.3rem'}}\n                                 >매너 평가하기</button>\n                        </div>:\n                          <div>\n                          <p style={{fontSize:'1.3rem', color:'green'}}>매너 평가를 완료했습니다.</p>\n                          \n                      </div>\n                        }\n                      \n                        \n                        </div>\n     \n                        </Col>\n                        </Row>\n                        </ListGroup.Item>\n                );\n               \n            })\n        \n            setOrders(orderlist);        \n    }\n\n\n    useEffect(()=>{\n        fetchOrders()\n    },[userData.user_id, flag])\n\n\n\n \n\n    \n    \n\n    return (<div>\n        <Modal open={ modalOpen } close={ closeModal } >\n\t\t    {modalContents}\n        </Modal>\n       \n\n   \n        <Container>\n        <CategoryDirection tag1={'구매 목록'}></CategoryDirection>\n        <EmptyCheck text={\"구매한 상품이 없습니다\"} items={orders}></EmptyCheck>\n        </Container>\n        \n\n    </div>)\n}\n\nexport default PurchaseList;"]},"metadata":{},"sourceType":"module"}